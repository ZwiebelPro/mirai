<div class="panel-card slide-up">
    <div id="mainView">
        <a href="downloads.html" class="back-link">← Categories</a>
        <div class="header">
            <h2>Native Injector</h2>
        </div>
        <select id="download-select" class="custom-select">
            <option value="MIRROR">MiraiB.zip (Standard)</option>
            <option value="Nikki.dll">Nikki.dll (Standalone)</option>
        </select>
        <button onclick="checkSelection()" class="btn-primary full">Download</button>
    </div>

    <script src="script.js?v=2"></script>
    
    <div id="warningView" style="display:none;">
        <div class="header">
            <h2>External Mirror</h2>
        </div>
        <div class="warning-box">
            <li style="color:var(--pastel-pink); font-weight:700; margin-bottom:10px;">SAFETY PROTOCOL</li>
            <li>• Redirecting to MediaFire.</li>
            <li>• Close any pop-up ads immediately.</li>
            <li>• Only download <b>MiraiB.zip</b>.</li>
        </div>
        <button id="timerButton" class="btn-primary full waiting">Wait 5s...</button>
    </div>
</div>

<script>
    function checkSelection() {
        const choice = document.getElementById('download-select').value;
        if(choice === 'MIRROR') {
            document.getElementById('mainView').style.display = 'none';
            document.getElementById('warningView').style.display = 'block';
            startCountdown("https://www.mediafire.com/file/2o0mhugq2xx1iiv/MiraiB.zip/file");
        } else {
            window.location.href = choice;
        }
    }

    function startCountdown(url) {
        const btn = document.getElementById('timerButton');
        let count = 5;
        const timer = setInterval(() => {
            count--;
            btn.innerText = `Wait ${count}s...`;
            if (count <= 0) {
                clearInterval(timer);
                btn.innerText = "Continue to Download";
                btn.classList.remove('waiting');
                btn.onclick = () => {
                    window.open(url, "_blank");
                    window.location.href = "downloads.html";
                };
            }
        }, 1000);
    }
</script>

